{"version":3,"file":"mpulse.min.js","sources":["../src/mpulse.js"],"names":["window","fetchUrl","url","callback","xhrFn","XDomainRequest","xhrFnOnload","XMLHttpRequest","require","ActiveXObject","xhr","onload","responseText","onreadystatechange","readyState","open","send","warn","message","console","generateSessionID","replace","c","r","Math","random","v","toString","signConfig","apiKey","secretKey","t","CryptoJS","HmacSHA256","createApp","key","skey","options","ensureUrlPrefix","indexOf","forceSSL","location","protocol","getConfigUrl","configUrl","ts","Date","getBeaconUrl","configJson","beacon_url","parseConfig","data","newConfigJson","JSON","parse","configkey","hasOwnProperty","e","initialized","sessionID","startSession","metricDefs","timerDefs","dimensionDefs","PageParams","cms","customMetrics","cts","customTimers","cds","customDimensions","i","length","m","name","label","d","configJsonRefresh","setTimeout","fetchConfig","REFRESH_CRUMB_INTERVAL","setImm","processQueue","getCurrentDimensions","copy","dimName","dimensions","addToQueue","type","value","beaconQueue","push","group","ab","when","calledFromTimer","processQueueWaiting","PROCESS_QUEUE_WAIT","q","shift","val","sendBeacon","params","round","sessionStart","nowOffset","sessionLength","MPULSE_VERSION","fireEvent","paramsArray","encodeURIComponent","undefined","baseUrl","join","startTimer","latestTimerId","timers","time","now","stopTimer","id","timer","deltaMs","sendTimer","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","bucket","test","getABTest","resetABTest","setDimension","resetDimension","setSessionID","getSessionID","setSessionLength","incrementSessionLength","getSessionLength","subscribe","eventName","subscribers","payload","EVENTS","exports","noConflict","root","mPulse","previousObj","init","apps","app","defaultApp","APP_FUNCTIONS","fnName","getApp","nop","stop","process","nextTick","bind","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","fn","performance","methods","timing","navigationStart","version","define","amd","module"],"mappings":"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"}